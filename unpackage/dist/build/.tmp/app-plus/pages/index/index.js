(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"02d0":function(t,e,a){"use strict";var i=a("0e03"),n=a.n(i);n.a},"0e03":function(t,e,a){},"6e46":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{cityInfo:{},loading:!1,weatherBaseInfo:{},weatherAllInfo:[],current_index:0,storage_cityList:[],weekList:["","一","二","三","四","五","六","末"]}},computed:{getTitle:function(){var t="";return this.cityInfo.city&&(t="".concat(this.cityInfo.city,"-天气预报")),this.cityInfo.name&&(t="".concat(this.cityInfo.name,"-天气预报")),this.cityInfo.city||this.cityInfo.name||(t="天气预报"),t}},onShow:function(){this.current_index=0,t.setNavigationBarTitle({title:"天气预报"});try{var e=t.getStorageSync("weather_storage_cityList");e&&e.length?(this.cityInfo=e[0],this.storage_cityList=e,t.setNavigationBarTitle({title:this.getTitle}),this.getWeather("base"),this.getWeather("all")):this.getLocation()}catch(a){this.getLocation(),console.log(a," at pages\\index\\index.vue:149")}},methods:{getLocation:function(){var e=this;this.loading=!0,t.showLoading({title:"城市定位中..."}),t.request({url:"https://restapi.amap.com/v3/ip",method:"GET",data:{key:"1155d2464abdf5c3a50d534a5591f293"},success:function(a){if(1==a.data.status){e.cityInfo=a.data,e.storage_cityList.push(e.cityInfo),t.setNavigationBarTitle({title:e.getTitle}),e.getWeather("base"),e.getWeather("all");try{t.setStorageSync("weather_storage_cityList",[e.cityInfo])}catch(i){console.log(i," at pages\\index\\index.vue:176")}}else a.data.info&&t.showModal({content:a.data.info,showCancel:!1});console.log(e.cityInfo," at pages\\index\\index.vue:191")},fail:function(e){console.log("request fail",e," at pages\\index\\index.vue:194"),t.showModal({content:"定位失败，请手动选择城市",showCancel:!1})},complete:function(){e.loading=!1,t.hideLoading()}})},getWeather:function(e){var a=this;this.loading=!0,t.showLoading({title:"获取天气信息..."}),t.request({url:"https://restapi.amap.com/v3/weather/weatherInfo",method:"GET",data:{key:"1155d2464abdf5c3a50d534a5591f293",city:this.cityInfo.adcode,extensions:e},success:function(i){console.log(i," at pages\\index\\index.vue:220"),1==i.data.status?"base"===e?a.weatherBaseInfo=i.data.lives[0]:"all"===e&&(a.weatherAllInfo=i.data.forecasts[0]):i.data.info&&t.showModal({content:i.data.info,showCancel:!1})},fail:function(e){console.log("request fail",e," at pages\\index\\index.vue:237"),t.showModal({content:"数据获取失败，请稍后重试",showCancel:!1})},complete:function(){a.loading=!1,t.hideLoading()}})},changeCity:function(e){console.log(e," at pages\\index\\index.vue:250"),this.current_index=e,this.cityInfo=this.storage_cityList[e],t.setNavigationBarTitle({title:this.getTitle}),this.getWeather("base"),this.getWeather("all")}}};e.default=a}).call(this,a("6e42")["default"])},"8aa8":function(t,e,a){"use strict";a.r(e);var i=a("6e46"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},"8e6c":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=(t._self._c,t.item.date.slice(5));t.$mp.data=Object.assign({},{$root:{g0:a}})},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},fd9a:function(t,e,a){"use strict";a.r(e);var i=a("8e6c"),n=a("8aa8");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("02d0");var s=a("2877"),c=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports}},[["01a6","common/runtime","common/vendor"]]]);